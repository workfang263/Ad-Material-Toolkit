<template>
  <div class="product-table-container">
    <iframe
      src="http://192.168.0.67:5001/"
      frameborder="0"
      class="product-table-iframe"
      title="äº§å“è¡¨æ ¼ç”Ÿæˆå·¥å…·"
      @load="onIframeLoad"
    ></iframe>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'

const iframeRef = ref(null)

// iframe åŠ è½½å®Œæˆ
const onIframeLoad = () => {
  console.log('âœ… [ProductTable] iframe åŠ è½½å®Œæˆ')
  try {
    // å°è¯•è°ƒæ•´ iframe é«˜åº¦ï¼ˆå¦‚æœå…è®¸ï¼‰
    const iframe = document.querySelector('.product-table-iframe')
    if (iframe && iframe.contentWindow) {
      // æ³¨æ„ï¼šè·¨åŸŸæƒ…å†µä¸‹å¯èƒ½æ— æ³•è®¿é—® contentWindow
      console.log('âœ… [ProductTable] iframe å†…å®¹å·²åŠ è½½')
    }
  } catch (e) {
    // è·¨åŸŸé™åˆ¶ï¼Œæ— æ³•è®¿é—® iframe å†…å®¹ï¼Œè¿™æ˜¯æ­£å¸¸çš„
    console.log('â„¹ï¸ [ProductTable] è·¨åŸŸé™åˆ¶ï¼Œæ— æ³•è®¿é—® iframe å†…å®¹ï¼ˆè¿™æ˜¯æ­£å¸¸çš„ï¼‰')
  }
}

onMounted(() => {
  console.log('ğŸ“Š [ProductTable] äº§å“è¡¨æ ¼é¡µé¢å·²åŠ è½½')
})

onUnmounted(() => {
  console.log('ğŸ“Š [ProductTable] äº§å“è¡¨æ ¼é¡µé¢å·²å¸è½½')
})
</script>

<style scoped>
.product-table-container {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
}

.product-table-iframe {
  width: 100%;
  height: calc(100vh - 40px); /* å‡å» padding */
  border: none;
  display: block;
}

/* ç¡®ä¿å®¹å™¨å æ»¡çˆ¶å…ƒç´  */
.product-table-container {
  padding: 0;
  margin: 0;
}
</style>


